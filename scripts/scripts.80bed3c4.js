"use strict";var app=angular.module("nfApp",[]);app.controller("PlaylistCtrl",["$scope","$http","YoutubePlaylist","SoundcloudPlaylist",function(a,b,c,d){var e=document.querySelector("#scIframe"),f=SC.Widget(e);a.scWidget=f,a.elements=[],c.getPlaylist().then(function(b){a.elements=a.elements.concat(b)}).then(function(){d.getPlaylist("130907148").then(function(b){a.elements=a.elements.concat(b)})}).then(function(){d.getPlaylist("206137365").then(function(b){a.elements=a.elements.concat(b),a.elements.sort(function(a,b){return b.date-a.date}),a.play(a.elements[0])})}),a.scVisible=!1,a.currentIndex=0,a.playNext=function(){a.play(a.elements[a.currentIndex+1])};var g=function(b){a.scVisible=!0;var c="http://api.soundcloud.com/tracks/"+b+"?client_id=d570f7e4f4a321e577dfa5271ba42f32";a.scWidget.bind(SC.Widget.Events.READY,function(){a.scWidget.load(c,{show_artwork:!1,auto_play:!0})}),a.scWidget.bind(SC.Widget.Events.FINISH,function(){a.playNext()})},h=function(b){a.scVisible=!1,a.scWidget.pause(),$ytWidget.loadVideoById(b)};a.play=function(b){a.currentIndex=a.elements.indexOf(b);var c=b.id,d=b.type;"sc"===d?g(c):h(c)}}]),app.factory("YoutubePlaylist",["$http",function(a){return{getPlaylist:function(){return a({method:"GET",url:"https://www.googleapis.com/youtube/v3/search",params:{part:"snippet",order:"rating",q:"front end web development",type:"video",videoEmbeddable:!0,maxResults:20,key:"AIzaSyCu56RQ7hVXo3sUsFGE_SSLTR_DJNIUsJQ"}}).then(function(a){var b=a.data.items,c=[];for(var d in b)c.push({type:"yt",id:b[d].id.videoId,title:b[d].snippet.title,date:new Date(b[d].snippet.publishedAt)});return c})}}}]),app.factory("SoundcloudPlaylist",["$http",function(a){return{getPlaylist:function(b){return a({method:"GET",url:"http://api.soundcloud.com/users/"+b+"/tracks",params:{client_id:"d570f7e4f4a321e577dfa5271ba42f32"}}).then(function(a){var b=a.data,c=[];for(var d in b)c.push({type:"sc",id:b[d].id,title:b[d].title,date:new Date(b[d].created_at)});return c})}}}]);